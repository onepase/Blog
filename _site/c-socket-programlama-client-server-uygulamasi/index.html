<!DOCTYPE html>
<html lang="tr-TR" data-theme="light">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0,viewport-fit=cover">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>C Socket Programlama - Client / Server Uygulaması - Hakan Torun</title>
		<meta name="description" content="Hakan Torun Kişisel Blog Sitesi. Bilgisayar mühendisliği, yazılım geliştirme, siber güvenlik ve çeşitli konularda blog gönderilerine erişebilirsiniz.">
		<meta name="keywords" content="c ilec programlamac programlama ilec socket programlamac soket programlamaclient servernetwork programlamaörneğiörnek uygulamasocketsocket nedirtcp/ip">
		<base href="https://hakan.io" />
		
    	<meta content="2013-07-18T06:05:30+03:00" property="article:published_time">
    	<meta content="https://hakan.io/about/" property="article:author">
  		
		<meta property="og:site_name" content="Hakan Torun">
		<meta property="og:type" content="article" />
		<meta property="og:url" content="https://hakan.io/c-socket-programlama-client-server-uygulamasi/"/>
		<meta property="og:title" content="C Socket Programlama - Client / Server Uygulaması - Hakan Torun" />
		<meta property="og:description" content="Hakan Torun Kişisel Blog Sitesi. Bilgisayar mühendisliği, yazılım geliştirme, siber güvenlik ve çeşitli konularda blog gönderilerine erişebilirsiniz." />
		<meta property="og:image" content="https://hakan.io/assets/images/favicon.png"/>
		<meta name="twitter:card" content="summary"/>
		<meta property="twitter:title" content="C Socket Programlama - Client / Server Uygulaması - Hakan Torun" />
		<meta property="twitter:description" content="Hakan Torun Kişisel Blog Sitesi. Bilgisayar mühendisliği, yazılım geliştirme, siber güvenlik ve çeşitli konularda blog gönderilerine erişebilirsiniz." />
		<meta property="twitter:image" content="https://hakan.io/assets/images/favicon.png" />
		<link rel="stylesheet" href="assets/css/highlight.css">
		<link rel="stylesheet" href="assets/css/style.css">
		<link rel="shortcut icon" href="assets/images/favicon.png" />
		<link rel="alternate" type="application/atom+xml" title="Hakan Torun" href="https://hakan.io/atom.xml">
		<link rel="alternate" type="application/json" title="Hakan Torun" href="https://hakan.io/feed.json" />
		<link rel="sitemap" type="application/xml" title="sitemap" href="https://hakan.io/sitemap.xml" />
		<meta name="google-site-verification" content="Q4Ewp22lX-DiRoBVzVVP13l6lh2oxChSmpGfBP0SPj8" />
	</head>
<body>
<div class="container">
	<div class="profile">
		<a href="https://hakan.io"><img src="assets/images/hakan-torun.jpg" class="profile-image"></a>
		<div class="profile-about">
			<h2 style="margin-bottom: 0; font-weight: 700;">Hakan Torun</h2>
			
				<a href="https://facebook.com/onepase" target="_blank"><img src="assets/images/icon/facebook.svg" class="social-icon"></a>
			
			<a href="https://twitter.com/onepase" target="_blank"><img src="assets/images/icon/twitter.svg" class="social-icon"></a>
			<a href="https://instagram.com/onepase" target="_blank"><img src="assets/images/icon/instagram.svg" class="social-icon"></a>
			<a href="https://youtube.com/onepase" target="_blank"><img src="assets/images/icon/youtube.svg" class="social-icon"></a>
			<a href="https://github.com/onepase" target="_blank"><img src="assets/images/icon/github.svg" class="social-icon"></a>
			<a href="about"><img src="assets/images/icon/me.svg" class="social-icon"></a>
			<br>
			Computer Engineer @pardinus <br> Founder @zaqa <br> Open Source /#linux
			<br>
			<div class="mode" id="mode-switcher" onclick="toggleNightMode();">
				<span></span>
			</div>
		</div>
	</div>
	
<div class="post-header">
	<div class="post-date">18.07.2013</div>
	<div class="post-share">
		Share:&nbsp; 
		<a href="https://www.facebook.com/sharer/sharer.php?u=https://hakan.io/c-socket-programlama-client-server-uygulamasi" target="_blank"><img src="assets/images/icon/facebook.svg" class="social-icon"></a>
		<a href="https://twitter.com/intent/tweet?source=tweetbutton&amp;original_referer=https://hakan.io/c-socket-programlama-client-server-uygulamasi&amp;text=C Socket Programlama - Client / Server Uygulaması - https://hakan.io/c-socket-programlama-client-server-uygulamasi" target="_blank"><img src="assets/images/icon/twitter.svg" class="social-icon"></a>
		<a href="https://api.whatsapp.com/send?text=https://hakan.io/c-socket-programlama-client-server-uygulamasi" target="_blank"><img src="assets/images/icon/whatsapp.svg" class="social-icon"></a>
	</div>
</div>

<div class="blog-post-content">
	<h1>C Socket Programlama - Client / Server Uygulaması</h1>
	<p>Bu yazımızda C programlama dili ile Linux üzerinde, örnek olması açısından iki uygulamanın haberleşmesini sağlayacağız. Socket, basitçe iki prosesin TCP/IP protokolü üzerinden haberleşmesi için açılan kapı olarak tanımlayabiliriz. Network üzerinde veri aktarımı için öncelikle socket() metoduyla bir socket açmamız, bu sockete de bind() metodu ile bir port numarası atamalıyız. Socketler listen() çağrısıyla bağlantıları dinler, accept() metoduyla bağlantıları kabul eder. Socketler connect() çağrısı ile belirtilen adrese bağlantı sağlar. Socketler send() metoduyla veri gönderir, recv() metoduyla veri alır.</p>

<p>Şimdi basit olarak clientın servera bağlanıp bir mesaj aldığını kurgulayalım. Server için;</p>

<ul>
  <li>
    <p>socket() ile bir socket oluşturulacak</p>
  </li>
  <li>
    <p>bind() ile sockete bir port bağlanacak</p>
  </li>
  <li>
    <p>listen() ile bağlanan port dinlenecek</p>
  </li>
  <li>
    <p>accept() ile varsa bağlantı kabul edilecek</p>
  </li>
  <li>
    <p>send() ile kabul edilen bağlantıya veri gönderilecek</p>
  </li>
  <li>
    <p>close() ile kabul edilen bağlantı kapatılacak.</p>
  </li>
</ul>

<p>Client için;</p>

<ul>
  <li>
    <p>socket() ile bir socket oluşturulacak</p>
  </li>
  <li>
    <p>connect() ile belirtilen adrese bağlantı isteği gönderecek ve bağlanacak</p>
  </li>
  <li>
    <p>recv() ile bağlandığı adresten veri alacak.</p>
  </li>
</ul>

<p>Örnek uygulamada, client server’a bağlandığı zaman server client’a “Hello Client!” mesajı gönderecek ve client bu mesajı alacaktır.</p>

<p>Server.c ve client.c dosyaları derlendikten sonra ilgili dizinde ./server komutu ile server uygulaması başlatılır, ./client 127.0.0.1 komutu ile client uygulaması başlatılır. Örnek uygulamada port numarası olarak 7841 verdik. Tabi bu komutlar client ve server uygulamalarının aynı bilgisayar üzerinde koştuğu durumda geçerli.</p>

<p>Server.c</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"> 
<span class="c1">#include &lt;sys/socket.h&gt;</span>
<span class="c1">#include &lt;netinet/in.h&gt;</span>
<span class="c1">#include &lt;arpa/inet.h&gt;</span>
<span class="c1">#include &lt;stdio.h&gt;</span>
<span class="c1">#include &lt;stdlib.h&gt;</span>
<span class="c1">#include &lt;unistd.h&gt;</span>
<span class="c1">#include &lt;errno.h&gt;</span>
<span class="c1">#include &lt;string.h&gt;</span>
<span class="c1">#include &lt;sys/types.h&gt;</span>

<span class="n">int</span> <span class="nb">main</span><span class="p">(</span><span class="n">int</span> <span class="n">argc</span><span class="p">,</span> <span class="n">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
    <span class="n">int</span> <span class="n">listenfd</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">connfd</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">struct</span> <span class="n">sockaddr_in</span> <span class="n">serv_addr</span><span class="p">;</span> 

    <span class="n">char</span> <span class="n">sendBuff</span><span class="p">[</span><span class="mi">1025</span><span class="p">];</span>

    <span class="n">listenfd</span> <span class="o">=</span> <span class="nf">socket</span><span class="p">(</span><span class="no">AF_INET</span><span class="p">,</span> <span class="no">SOCK_STREAM</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="nf">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="c1">#038;serv_addr, '0', sizeof(serv_addr));</span>
    <span class="nf">memset</span><span class="p">(</span><span class="n">sendBuff</span><span class="p">,</span> <span class="s1">'0'</span><span class="p">,</span> <span class="nb">sizeof</span><span class="p">(</span><span class="n">sendBuff</span><span class="p">));</span> 

    <span class="n">serv_addr</span><span class="mf">.</span><span class="n">sin_family</span> <span class="o">=</span> <span class="no">AF_INET</span><span class="p">;</span>
    <span class="n">serv_addr</span><span class="mf">.</span><span class="n">sin_addr</span><span class="mf">.</span><span class="n">s_addr</span> <span class="o">=</span> <span class="nf">htonl</span><span class="p">(</span><span class="no">INADDR_ANY</span><span class="p">);</span>
    <span class="n">serv_addr</span><span class="mf">.</span><span class="n">sin_port</span> <span class="o">=</span> <span class="nf">htons</span><span class="p">(</span><span class="mi">7841</span><span class="p">);</span> 

    <span class="nf">bind</span><span class="p">(</span><span class="n">listenfd</span><span class="p">,</span> <span class="p">(</span><span class="n">struct</span> <span class="n">sockaddr</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="c1">#038;serv_addr, sizeof(serv_addr)); </span>

    <span class="nf">listen</span><span class="p">(</span><span class="n">listenfd</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span> 

    <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">connfd</span> <span class="o">=</span> <span class="nf">accept</span><span class="p">(</span><span class="n">listenfd</span><span class="p">,</span> <span class="p">(</span><span class="n">struct</span> <span class="n">sockaddr</span><span class="o">*</span><span class="p">)</span><span class="kc">NULL</span><span class="p">,</span> <span class="kc">NULL</span><span class="p">);</span> 
		<span class="n">char</span> <span class="n">data</span><span class="p">[]</span><span class="o">=</span><span class="s2">"Hello Client! </span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
		<span class="nf">send</span><span class="p">(</span><span class="n">connfd</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="nb">strlen</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		
        <span class="nf">close</span><span class="p">(</span><span class="n">connfd</span><span class="p">);</span>
        <span class="nb">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
     <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Client.c</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">    
<span class="c1">#include &lt;sys/socket.h&gt;</span>
<span class="c1">#include &lt;sys/types.h&gt;</span>
<span class="c1">#include &lt;netinet/in.h&gt;</span>
<span class="c1">#include &lt;netdb.h&gt;</span>
<span class="c1">#include &lt;stdio.h&gt;</span>
<span class="c1">#include &lt;string.h&gt;</span>
<span class="c1">#include &lt;stdlib.h&gt;</span>
<span class="c1">#include &lt;unistd.h&gt;</span>
<span class="c1">#include &lt;errno.h&gt;</span>
<span class="c1">#include &lt;arpa/inet.h&gt; </span>

<span class="n">int</span> <span class="nb">main</span><span class="p">(</span><span class="n">int</span> <span class="n">argc</span><span class="p">,</span> <span class="n">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
    <span class="n">int</span> <span class="n">sockfd</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">char</span> <span class="n">recvBuff</span><span class="p">[</span><span class="mi">1024</span><span class="p">];</span>
    <span class="n">struct</span> <span class="n">sockaddr_in</span> <span class="n">serv_addr</span><span class="p">;</span> 

    <span class="k">if</span><span class="p">(</span><span class="n">argc</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nb">printf</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2"> Usage: %s &lt;ip of server&gt; </span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span> 

    <span class="nf">memset</span><span class="p">(</span><span class="n">recvBuff</span><span class="p">,</span> <span class="s1">'0'</span><span class="p">,</span><span class="nb">sizeof</span><span class="p">(</span><span class="n">recvBuff</span><span class="p">));</span>
    <span class="k">if</span><span class="p">((</span><span class="n">sockfd</span> <span class="o">=</span> <span class="nf">socket</span><span class="p">(</span><span class="no">AF_INET</span><span class="p">,</span> <span class="no">SOCK_STREAM</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nb">printf</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2"> Error : Could not create socket </span><span class="se">\n</span><span class="s2">"</span><span class="p">);</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span> 

    <span class="nf">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="c1">#038;serv_addr, '0', sizeof(serv_addr)); </span>

    <span class="n">serv_addr</span><span class="mf">.</span><span class="n">sin_family</span> <span class="o">=</span> <span class="no">AF_INET</span><span class="p">;</span>
    <span class="n">serv_addr</span><span class="mf">.</span><span class="n">sin_port</span> <span class="o">=</span> <span class="nf">htons</span><span class="p">(</span><span class="mi">7841</span><span class="p">);</span> 

    <span class="k">if</span><span class="p">(</span><span class="nb">inet_pton</span><span class="p">(</span><span class="no">AF_INET</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="o">&amp;</span><span class="c1">#038;serv_addr.sin_addr)&lt;=0)</span>
    <span class="p">{</span>
        <span class="nb">printf</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2"> inet_pton error occured</span><span class="se">\n</span><span class="s2">"</span><span class="p">);</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span> 

    <span class="k">if</span><span class="p">(</span> <span class="nf">connect</span><span class="p">(</span><span class="n">sockfd</span><span class="p">,</span> <span class="p">(</span><span class="n">struct</span> <span class="n">sockaddr</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="c1">#038;serv_addr, sizeof(serv_addr)) &lt; 0)</span>
    <span class="p">{</span>
       <span class="nb">printf</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2"> Error : Connect Failed </span><span class="se">\n</span><span class="s2">"</span><span class="p">);</span>
       <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span> 

    <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="n">n</span> <span class="o">=</span> <span class="nf">read</span><span class="p">(</span><span class="n">sockfd</span><span class="p">,</span> <span class="n">recvBuff</span><span class="p">,</span> <span class="nb">sizeof</span><span class="p">(</span><span class="n">recvBuff</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">recvBuff</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="nb">fputs</span><span class="p">(</span><span class="n">recvBuff</span><span class="p">,</span> <span class="n">stdout</span><span class="p">)</span> <span class="o">==</span> <span class="no">EOF</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nb">printf</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2"> Error : Fputs error</span><span class="se">\n</span><span class="s2">"</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span> 

    <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nb">printf</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2"> Read error </span><span class="se">\n</span><span class="s2">"</span><span class="p">);</span>
    <span class="p">}</span> 

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

</div>
<div class="tags-container">
	
		<a href="https://hakan.io/tags/#c+ile" class="post-tag">c ile</a>, 
	
		<a href="https://hakan.io/tags/#c+programlama" class="post-tag">c programlama</a>, 
	
		<a href="https://hakan.io/tags/#c+programlama+ile" class="post-tag">c programlama ile</a>, 
	
		<a href="https://hakan.io/tags/#c+socket+programlama" class="post-tag">c socket programlama</a>, 
	
		<a href="https://hakan.io/tags/#c+soket+programlama" class="post-tag">c soket programlama</a>, 
	
		<a href="https://hakan.io/tags/#client+server" class="post-tag">client server</a>, 
	
		<a href="https://hakan.io/tags/#network+programlama" class="post-tag">network programlama</a>, 
	
		<a href="https://hakan.io/tags/#%C3%B6rne%C4%9Fi" class="post-tag">örneği</a>, 
	
		<a href="https://hakan.io/tags/#%C3%B6rnek+uygulama" class="post-tag">örnek uygulama</a>, 
	
		<a href="https://hakan.io/tags/#socket" class="post-tag">socket</a>, 
	
		<a href="https://hakan.io/tags/#socket+nedir" class="post-tag">socket nedir</a>, 
	
		<a href="https://hakan.io/tags/#tcp%2Fip" class="post-tag">tcp/ip</a>
	
</div>
<div class="navigation">
	
		<a class="prev" href="/linux-konsolda-video-oynatmak">< Linux Konsolda Video Oynatmak</a>
	 
	<a class="next" href="/linux-uzerinde-topluca-dosya-uzantisi-degistirme/">Linux Üzerinde Topluca Dosya Uzantısı Değiştirme ></a>

</div>

	<section class="comment-area w-100">
		<div class="comment-wrapper">
			<div id="disqus_thread" class="article-comments"></div>
			<script>
			(function() {
			var d = document, s = d.createElement('script');
			s.src = '//hakanio.disqus.com/embed.js';
			s.setAttribute('data-timestamp', +new Date());
			(d.head || d.body).appendChild(s);
			})();
			</script>
			<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
		</div>
	</section>

	<div class="footer">
		<span>Made with <font color="red">♥</font> on Earth, a minimalist Jekyll Theme by <a href="https://hakan.io"><b>Hakan</b></a></span>
	</div>
</div>
	<script src="assets/js/ephesus.js"></script>
	<script type="text/javascript">
		if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
			document.documentElement.setAttribute('data-theme', 'dark');
			document.getElementById('mode-switcher').classList.add('active');
		}
	</script>

	
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-50152086-19"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-50152086-19');
    </script>
	
</body>
</html>