<!DOCTYPE html>
<html lang="tr-TR" data-theme="light">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0,viewport-fit=cover">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>Memcached Kurulumu ve PHP Memcache Kullanımı - Hakan Torun</title>
		<meta name="description" content="Hakan Torun Kişisel Blog Sitesi. Bilgisayar mühendisliği, yazılım geliştirme, siber güvenlik ve çeşitli konularda blog gönderilerine erişebilirsiniz.">
		<meta name="keywords" content="memcachedphpmemcachekullanimornek">
		<base href="https://hakan.io" />
		
    	<meta content="2018-08-20T03:22:16+03:00" property="article:published_time">
    	<meta content="https://hakan.io/about/" property="article:author">
  		
		<meta property="og:site_name" content="Hakan Torun">
		<meta property="og:type" content="article" />
		<meta property="og:url" content="https://hakan.io/memcached-kurulumu-ve-php-memcache-kullanimi/"/>
		<meta property="og:title" content="Memcached Kurulumu ve PHP Memcache Kullanımı - Hakan Torun" />
		<meta property="og:description" content="Hakan Torun Kişisel Blog Sitesi. Bilgisayar mühendisliği, yazılım geliştirme, siber güvenlik ve çeşitli konularda blog gönderilerine erişebilirsiniz." />
		<meta property="og:image" content="https://hakan.io/assets/images/favicon.png"/>
		<meta name="twitter:card" content="summary"/>
		<meta property="twitter:title" content="Memcached Kurulumu ve PHP Memcache Kullanımı - Hakan Torun" />
		<meta property="twitter:description" content="Hakan Torun Kişisel Blog Sitesi. Bilgisayar mühendisliği, yazılım geliştirme, siber güvenlik ve çeşitli konularda blog gönderilerine erişebilirsiniz." />
		<meta property="twitter:image" content="https://hakan.io/assets/images/favicon.png" />
		<link rel="stylesheet" href="assets/css/highlight.css">
		<link rel="stylesheet" href="assets/css/style.css">
		<link rel="shortcut icon" href="assets/images/favicon.png" />
		<link rel="alternate" type="application/atom+xml" title="Hakan Torun" href="https://hakan.io/atom.xml">
		<link rel="alternate" type="application/json" title="Hakan Torun" href="https://hakan.io/feed.json" />
		<link rel="sitemap" type="application/xml" title="sitemap" href="https://hakan.io/sitemap.xml" />
		<meta name="google-site-verification" content="Q4Ewp22lX-DiRoBVzVVP13l6lh2oxChSmpGfBP0SPj8" />
	</head>
<body>
<div class="container">
	<div class="profile">
		<a href="https://hakan.io"><img src="assets/images/hakan-torun.jpg" class="profile-image"></a>
		<div class="profile-about">
			<h2 style="margin-bottom: 0; font-weight: 700;">Hakan Torun</h2>
			
				<a href="https://facebook.com/onepase" target="_blank"><img src="assets/images/icon/facebook.svg" class="social-icon"></a>
			
			<a href="https://twitter.com/onepase" target="_blank"><img src="assets/images/icon/twitter.svg" class="social-icon"></a>
			<a href="https://instagram.com/onepase" target="_blank"><img src="assets/images/icon/instagram.svg" class="social-icon"></a>
			<a href="https://youtube.com/onepase" target="_blank"><img src="assets/images/icon/youtube.svg" class="social-icon"></a>
			<a href="https://github.com/onepase" target="_blank"><img src="assets/images/icon/github.svg" class="social-icon"></a>
			<a href="about"><img src="assets/images/icon/me.svg" class="social-icon"></a>
			<br>
			Computer Engineer @pardinus <br> Founder @zaqa <br> Open Source /#linux
			<br>
			<div class="mode" id="mode-switcher" onclick="toggleNightMode();">
				<span></span>
			</div>
		</div>
	</div>
	
<div class="post-header">
	<div class="post-date">20.08.2018</div>
	<div class="post-share">
		Share:&nbsp; 
		<a href="https://www.facebook.com/sharer/sharer.php?u=https://hakan.io/memcached-kurulumu-ve-php-memcache-kullanimi" target="_blank"><img src="assets/images/icon/facebook.svg" class="social-icon"></a>
		<a href="https://twitter.com/intent/tweet?source=tweetbutton&amp;original_referer=https://hakan.io/memcached-kurulumu-ve-php-memcache-kullanimi&amp;text=Memcached Kurulumu ve PHP Memcache Kullanımı - https://hakan.io/memcached-kurulumu-ve-php-memcache-kullanimi" target="_blank"><img src="assets/images/icon/twitter.svg" class="social-icon"></a>
		<a href="https://api.whatsapp.com/send?text=https://hakan.io/memcached-kurulumu-ve-php-memcache-kullanimi" target="_blank"><img src="assets/images/icon/whatsapp.svg" class="social-icon"></a>
	</div>
</div>

<div class="blog-post-content">
	<h1>Memcached Kurulumu ve PHP Memcache Kullanımı</h1>
	<p>Yüksek trafiğe sahip web sunucular, özellikle CRUD işlemlerinin fazla olduğu web sunucular, yüksek trafik sonucunda çok fazla yük altına girecektir. Böyle bir durumda, kod kaynakları yeterince verimli kullanabilecek şekilde yazılmışsa, ağır yük altında hizmet verebilmek için ilk ihtiyaç duyulanlardan biri, bir önbellek mekanizmasıdır.</p>

<p>Memcahced nedir?</p>

<p>Memcached 2003 yılında, alanının ilklerinden olan popüler blog servisi LiveJournal için yazılmış ve sonrasında özellikle web uygulamalarında çokça kullanılmaya başlanmış ücretiz, açık kaynak, yüksek performanslı ve dağıtık bir önbellekleme sistemidir. Basit ama güçlü bir önbellekleme sistemidir. Günümüzde Facebook tarafından aktif olarak kullanılmakta ve geliştirilmesine katkı sunulmaktadır. Yine popüler web uygulama ve servisleri tarafından (Wikipedia, Youtube, Flickr) aktif olarak kullanılmaktadır.</p>

<p>Memcached bir in-memory storedur. Tüm önbellekleme hafıza(ram) üzerindedir. Dolayısıyla kritik verilerin yalnızca memcached üzerinde saklanmaması gerekir. Memcached üzerinde veri, key-value çiftleri olarak saklanır. Memcached özellikle veritabanı işlemlerinin fazla olduğu web uygulamalarında hayat kurtarıcıdır.</p>

<p>Memcached Kurulum</p>

<p>Debian tabanlı Linux dağıtımlarında;</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">apt-get <span class="nb">install </span>php-memcached
apt-get <span class="nb">install </span>memcached</code></pre></figure>

<p>RedHat/Fedora tabanlı Linux dağıtımlarında;</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">yum <span class="nb">install </span>php-memcached
yum <span class="nb">install </span>memcached</code></pre></figure>

<p>komutu ile Memcached ve Php-Memcached paketleri kolayca kurulabilir. Memcached TCP/IP tabanlıdır. Herhangi iki yazılım arasında memcached ile haberleşme sağlanabilir.</p>

<p>Memcached’i başlatmak için</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">memcached <span class="nt">-d</span> <span class="nt">-m</span> 512 <span class="nt">-l</span> 127.0.0.1 <span class="nt">-p</span> 11211 <span class="nt">-u</span> nobody</code></pre></figure>

<p>komutu kullanılabilir. Bu komut ile, 512 MB bir önbellek alanı kullanan, 11211 tcp ve udp portunu dinleyen bir memcached servisi başlatılacaktır. Memcached servisi başlatılırken oluşturulan önbellek alanı sabittir. İşletim sistemi mimarilerindeki bellek yönetimine benzer şekilde, eğer önbellek alanı dolduysa ilk yazılan verinin üzerine yazacaktır. Memcached için x86 sistemlerde maksimum 4GB önbellek alanı tanımlayabilirsiniz.</p>

<p>Memcached başlatıldıktan sonra servisle ilgili daha fazla detay almak için;</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">echo</span> <span class="s2">"stats settings"</span> | nc localhost 11211</code></pre></figure>

<p>komutunu kullanabilirsiniz. Varsayılan olarak, Memcached key uzunlukları 250 karakterdir. Value ise maksimum 1MB olabilir.</p>

<p>PHP Memcached Kullanımı</p>

<p>PHP ile memcached’e bağlanmak için;</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nv">$memcache</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Memcache</span><span class="p">;</span>
<span class="nv">$memcache</span><span class="o">-&gt;</span><span class="nf">connect</span><span class="p">(</span><span class="s1">'127.0.0.1'</span><span class="p">,</span> <span class="mi">11211</span><span class="p">)</span> <span class="k">or</span> <span class="k">die</span> <span class="p">(</span><span class="s2">"Memcached ile bağlantı kurulamıyor"</span><span class="p">);</span></code></pre></figure>

<p>Memcached üzerine veri yazmak için;</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nv">$exampleValue</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="nv">$exampleValue</span> <span class="o">=</span> <span class="s1">'Example String'</span><span class="p">;</span>
<span class="nv">$exampleValue</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">'0'</span><span class="p">,</span><span class="s1">'1'</span><span class="p">,</span><span class="s1">'2'</span><span class="p">,</span><span class="s1">'3'</span><span class="p">);</span>

<span class="nv">$memcache</span><span class="o">-&gt;</span><span class="nf">set</span><span class="p">(</span><span class="s1">'exampleKey'</span><span class="p">,</span> <span class="nv">$exampleValue</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="mi">1800</span><span class="p">);</span>
<span class="c1">//Birinci parametre anahtar, ikinci parametre değer, üçüncü parametre memcached sıkıştırma true/false, dördüncü parametre saniye cinsinden önbellekleme süresi</span></code></pre></figure>

<p>Memcached üzerindeki bir anahtarın değerine ulaşmak için;</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nv">$exampleValue</span> <span class="o">=</span> <span class="nv">$memcache</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'exampleKey'</span><span class="p">);</span></code></pre></figure>

<p>Örnek bir senaryoda, web uygulamamızdaki çok sık değişmeyen bir değer, veritabanında saklanıyor olsun. Sayfa her render edildiğinde veya her api çağrısında bu değerin veritabanından okunması gerekecektir. Biz memcached ile bu değeri her seferinde veritabanından okumak yerine önbellekte tutmak istiyor olalım.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="c1">//Veritabanı bağlantıları vs.</span>

<span class="nv">$memcache</span>     <span class="o">=</span> <span class="k">new</span> <span class="nc">Memcache</span><span class="p">;</span>
<span class="nv">$memcache</span><span class="o">-&gt;</span><span class="nf">connect</span><span class="p">(</span><span class="s1">'127.0.0.1'</span><span class="p">,</span> <span class="mi">11211</span><span class="p">)</span> <span class="k">or</span> <span class="k">die</span> <span class="p">(</span><span class="s2">"Memcached ile bağlantı kurulamıyor"</span><span class="p">);</span>

<span class="nv">$exampleValue</span> <span class="o">=</span> <span class="nv">$memcache</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'exampleKey'</span><span class="p">);</span>

<span class="k">if</span><span class="p">(</span><span class="nv">$exampleValue</span> <span class="o">===</span> <span class="kc">true</span><span class="p">){</span>
	<span class="k">return</span> <span class="nv">$exampleValue</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">else</span><span class="p">{</span>
	<span class="nv">$exampleValue</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="nf">get_var</span><span class="p">(</span><span class="nb">sprintf</span><span class="p">(</span><span class="s2">"SELECT exampleValue FROM %s WHERE id = '%d'"</span><span class="p">,</span><span class="s1">'exampleTable'</span><span class="p">,</span><span class="mi">1</span><span class="p">));</span>
	<span class="k">if</span><span class="p">(</span><span class="nv">$exampleValue</span><span class="p">){</span>
		<span class="nv">$memcache</span><span class="o">-&gt;</span><span class="nf">set</span><span class="p">(</span><span class="s1">'exampleKey'</span><span class="p">,</span> <span class="nv">$exampleValue</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="mi">1800</span><span class="p">);</span>
		<span class="k">return</span> <span class="nv">$exampleValue</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">else</span><span class="p">{</span>
		<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Bu sayede veritabanından dolayı oluşacak disk i/o işlemleri azalacak, doğrudan bellek üzerinden erişilerek performans artışı sağlanabilecektir. Memcached’in doğru implement edilmesi, memcached üzerinde önbelleklenecek verilerin doğru seçilmesi ve yarış durumu oluşturabilecek işlemlerin önceden tespit edilmesi ile web sunucularında oluşabilecek yük azaltılabilecektir.</p>


</div>
<div class="tags-container">
	
		<a href="https://hakan.io/tags/#memcached" class="post-tag">memcached</a>, 
	
		<a href="https://hakan.io/tags/#php" class="post-tag">php</a>, 
	
		<a href="https://hakan.io/tags/#memcache" class="post-tag">memcache</a>, 
	
		<a href="https://hakan.io/tags/#kullanim" class="post-tag">kullanim</a>, 
	
		<a href="https://hakan.io/tags/#ornek" class="post-tag">ornek</a>
	
</div>
<div class="navigation">
	
		<a class="prev" href="/makine-ogrenmesi-turkce-haber-metinleri-veri-seti/">< Makine Öğrenmesi - Türkçe Haber Metinleri Veri Seti</a>
	 
	<a class="next" href="/ikili-arama-algoritmasi-binary-search-algorithm-c-ornek-kod/">İkili Arama Algoritması (Binary Search Algorithm) - C Örnek Kod ></a>

</div>

	<section class="comment-area w-100">
		<div class="comment-wrapper">
			<div id="disqus_thread" class="article-comments"></div>
			<script>
			(function() {
			var d = document, s = d.createElement('script');
			s.src = '//hakanio.disqus.com/embed.js';
			s.setAttribute('data-timestamp', +new Date());
			(d.head || d.body).appendChild(s);
			})();
			</script>
			<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
		</div>
	</section>

	<div class="footer">
		<span>Made with <font color="red">♥</font> on Earth, a minimalist Jekyll Theme by <a href="https://hakan.io"><b>Hakan</b></a></span>
	</div>
</div>
	<script src="assets/js/ephesus.js"></script>
	<script type="text/javascript">
		if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
			document.documentElement.setAttribute('data-theme', 'dark');
			document.getElementById('mode-switcher').classList.add('active');
		}
	</script>

	
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-50152086-19"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-50152086-19');
    </script>
	
</body>
</html>